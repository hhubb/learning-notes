# Docker基础知识

Docker是一个用于开发、发布和运行应用程序的开放平台。Docker可以使程序从复杂的架构中独立出来以便快速部署。使用Docker可以像管理你的应用一样管理你的架构。使用Docker可以显著的减少从开发到运行生产的延时。

## Docker作用

### 快速一致性交付应用

Docker允许开发者使用本地容器在标准化环境中工作，从而简化了开发生命周期。容器非常适合持续集成和持续交付(CI/CD)工作流。

可以快速的简化开发、发布到测试环境、修复bug、再次发布到测试环境、最后发布到生产环境这个传统过程。

### 响应式部署和扩展

容器可以运行在任何环境，如笔记本、物理机、虚拟机、云平台等。

Docker的可移植性和轻量级也自然的使它可以简单的动态管理工作负载、扩展和移除应用和服务，这几乎是实时的。

### 运行更多的负载在同一个硬件上

Docker是很轻量和快速的，所以可以在一个机器上尽可能的利用更少的资源去运行更多的服务。很适合中小型部署。

## Docker架构

Docker使用的是CS架构，docker的客户端与docker守护程序（Docker Daemon）通讯，后者的作用是构建、运行和部署你的容器。docker的客户端与docker守护程序运行在同一个系统或者你可以让docker客户端连接一个远程的docker守护程序。docker的客户端与docker守护程序（Docker Daemon）通过UNIX套接字或网络接口，使用REST API方式通讯。另一个Docker客户端是Docker Compose，它可以由一组容器组成一个程序进行工作。

### Docker守护程序（Docker daemon）

Docker守护程序根据Docker API的请求去管理Docker对象，比如镜像、容器哦、网络、容量等。一个守护程序也可以和其他的守护程序通讯一起管理Docker服务。

### Docker client （Docker 客户端）

Docker客户端是用户最主要的操作Docker的方式。可以用一些命令如：docker run 等命令去操作Docker守护进程。一个Docker客户端可以与多个Docker守护进程通讯。

### Docker 桌面（Docker Desktop）

是一个简化的实例应用，可以运行在Mac\Windows等环境上，可以构建和分享容器或者服务。Docker 桌面包括Docker守护程序、Docker 客户端、Docker Compose、 Docker Content Trust, Kubernetes, and Credential Helper.

### Docker注册镜像仓库（Docker registry）

Docker注册镜像仓库是用来存储Docker镜像的， Docker Hub是一个公共的注册表，每个人都可以使用。并且可以在上面找镜像，也可以搭建私人的镜像仓库。

## Docker对象

Docker对象包括 images, containers, networks, volumes, plugins等。

### 镜像

Docker镜像是一个带有指令的只读的模板，可以用来创建一个Docker容器。一个镜像基于另一个镜像，并进行一些额外的定制。

你可以自己创建一个镜像，也可以在registry中获取别人创建好的镜像。

你可以创建一个Dockerfile ，去构建自己的镜像。Dockerfile中的每条指令都会在映像中创建一个层。当你修改了Dockerfile并且重建镜像，只有那些已经改变的层才会被重建。这就是为什么镜像与其他虚拟化技术相比是轻量的、小的和快速的。

### 容器

容器是一个镜像所运行的实例。可以通过API命令启动、停止、删除、移动等操作控制容器。您可以将容器连接到一个或多个网络，将存储附加到其上，甚至可以根据其当前状态创建新镜像。

通常容器与其他容器和主机之间的隔离性是很好的。您可以控制容器的网络、存储或其他底层子系统与其他容器或主机的隔离程度。

容器是由它的映像以及在创建或启动它时提供给它的任何配置选项定义的。当容器被删除时，任何未存储在持久存储中的数据、状态的更改都会消失。



Docker提供了一种能力：将程序打包并运行在一个宽裕的隔离环境，这个环境叫做容器。容器的隔离和安全性使您可以在给定主机上同时运行多个容器。

容器是轻量的，并且包含了运行程序需要的所有条件，所以不需要依赖主机上安装的东西。

Docker提供了工具和平台来管理容器的生命周期:

1. 使用容器开发你的应用程序及其支持组件。
2. 容器成为部署、测试程序的基本单元
3. 当你准备好发布你的程序，将它做成一个容器或者被编排好的服务到生产环境。这样无论你是本地数据中心还是云平台他都可以同样的工作。

## 底层技术

Docker底层使用GO实现的，并利用Linux内核的几个特性来交付其功能。

Docker使用一种技术叫做”namespaces“提提供空间隔离，也叫做容器。当运行一个容器的时候，就是为这个容器创建了一组namespaces。

这些namespace提供一个隔离层，容器的每个方面都在单独的名称空间中运行，并且访问也受限于这个namespace。
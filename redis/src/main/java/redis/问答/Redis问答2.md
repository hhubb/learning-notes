# 基础知识
Redis 是什么？
Redis是一种内存型数据库，也可以持久化到磁盘上。数据是以key-value形式进行存储，内部有多种数据类型可以使用，可以用来做数据缓存、分布式锁、发布订阅等。

Redis 的持久化机制是什么？
Redis的持久化机制有两种一个是RDB快照，一个是AOF文件追加
RDB快照
RDB快照会在规定的时间间隔内对数据生成快照（如果需要强制缓存可以设置间隔时间为0），生成一个二进制的rdb文件，Redis在根据rdb文件内容将数据刷新到磁盘上
优点：数据丢失风险较小
缺点：在生成快照时，会阻塞Redis的其他操作，所以会对性能有一定的影响
AOF文件追加
AOF是指令追加，每进行一个增删改指令都会追加到一个文件中（可配置为立即写入和定期写入），然后再定期根据命令将数据同步到磁盘上
优点：数据安全性更高，因为是将所有的指令都记录下来了
缺点：因为AOF记录的是操作指令所以文件会比较大，Redis崩溃进行数据恢复时间也会比RDB长，而且也可能会存在丢失一些指令的情况


Redis 是单线程的吗？为什么？
Redis在处理指令时是单线程的，因为Redis是内存型数据库，本身执行速度就非常快CPU并不是性能瓶颈。
为Redis在处理指令时使用多路复用机制，减少执行的等待时间，实际处理指令时使用的是单线程，每个指令都是按顺序执行的。
Redis在连接客户端使用了多路复用机制，可以同时处理多个请求，同时Redis在等待某个客户端的请求和响应时不会阻塞其他的请求，很大程度上提高了并发性。
同时使用单线程在原子性上有天然的优势避免了加锁解锁的开销以及多线程之间上下文的切换。


什么是跳表（Skip List）？
跳表是Redis中的Sort Sets数据类型使用的数据结构。它本质是一个多层双向链表，节点根据score字段进行排序，每个节点除了记录元素、前后指针，还会有一个层和一些随机指针指向后续的节点，查找元素从最上层开始查找，直到找到比目标值大的元素才会下降到下一层继续查找，直到找到目标元素，这样可以提升目标元素的访问速度。




# 高级概念
Redis 中的发布/订阅模式是怎样的？
Redis 中的发布/订阅模式是一种消息传递机制，允许客户端通过订阅频道来接收消息。客户端可以通过 SUBSCRIBE 命令订阅一个或多个频道，而通过 PUBLISH 命令将消息发布到这些频道，所有订阅该频道的客户端会实时收到消息。
Redis 哨兵模式利用发布/订阅机制来实现主从监控和故障转移。哨兵通过订阅 __sentinel__:hello 频道来接收主库的状态信息，一旦主节点发生故障，哨兵会通过 __sentinel__:failover 频道广播故障转移的消息，其他哨兵和客户端会接收到这个消息，并更新新选举出来的主节点信息。

Redis 的事务是如何工作的？


Redis 中的缓存失效策略有哪些？
8个
noeviction
volatile-ttl
allkey-LRU
volatile-LRU
allkey-LFU
volatile-LFU
allkey-random
volatile-random

# 性能与优化
如何提高 Redis 的性能？

Redis 集群和主从复制的区别是什么？
Redis主从复制是一个主节点多个副本节点，所有写的命令都只在主节点进行，读操作可以主节点和副本节点进行。没有自动故障转移能力，一旦Redis主节点宕机需要人工切换主节点。或者配合使用哨兵集群进行自动故障转移功能。Redis主从复制提高了Redis的可用性，但写操作只能在主节点进行所以会成为性能的瓶颈，同时主节点所在的机器的内存也会成为存储的限制。因为只有主节点可以执行写操作一致性程度高，但一旦主节点故障数据还未同步到副本节点可能会造成数据的丢失。
Redis集群是以水平分片的形式进行扩展。集群总共有 16384 个槽位，每个节点分配固定的槽位，在写操作时根据路由规则将指令分配到对应的槽位所在的节点，突破了单机对Redis内存和性能的限制提高可用性。同时Redis集群也提供主备以及故障转移的能力，Redis集群的故障转移遵循的是Gossip协议是需要其他槽位的主节点进行投票，从故障节点的副本节点中选出新的主节点接管故障节点所负责的槽位。Redis集群的水平扩展使用的是最终一致性，因为写操作同步可能会有延迟。
（
架构
数据分布
扩展性
故障转移
数据一致性
）

# 实际应用
如何处理 Redis 的高可用性？
如果数据量不大的话可以做主从复制，提高Redis的读取效率。同时搭配哨兵，提供主从复制自动故障转移能力，进一步提供高可用。
如果数据量大，使用Redis Cluster模式，水平扩展数据分片，且为每一个分片主节点配置多个副本节点，读写性能都得到提高，还可以打破单机对Redis内存的限制进一步提高高可用。

如何在 Redis 中存储和查询 JSON 数据？
Redis中可以
使用String数据结构存储和查询 JSON 数据，如果只是需要存储数据不做任何JSON中单独的数据查询可以直接使用String方式存储
使用Map数据结构存储和查询 JSON 数据，如果需要对数据单独的获取可以以Map的方式存储
使用RedisJSON 模块存储和查询，这个模块允许你将原生 JSON 数据存储在 Redis 中，并支持通过 JSONPath 风格的查询语法来操作 JSON 数据。

# 常见命令
列举几个 Redis 常用命令。
set、get、del、expire、 setnx、lpop、lpush、rpop、rpush ...